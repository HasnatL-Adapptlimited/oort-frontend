<div class="widget-container">
  <kendo-tilelayout-item-header *ngIf="header" class="widget-header">
    <span class="widget-title" [title]="settings.title">{{
      settings.title
    }}</span>
  </kendo-tilelayout-item-header>
  <safe-button
    *ngIf="export"
    [isIcon]="true"
    icon="get_app"
    class="export-button"
    (click)="pdf.saveAs(exportName)"
  ></safe-button>
  <kendo-pdf-export #pdf paperSize="A4" margin="2cm" style="overflow: auto;">
    <div
      class="summary-card-container k-widget k-tile-layout k-grid-flow-col"
      style.grid-template-columns="{{ 'repeat(' + colsNumber + ', 1fr)' }}"
    >
      <div
        *ngFor="let card of settings.cards; let i = index"
        class="k-tilelayout-item k-card"
        [style.order]="i"
        style.grid-column-end="{{
          'span ' + (card.width > colsNumber ? colsNumber : card.width)
        }}"
        style.grid-row-end="{{ 'span ' + card.height }}"
      >
        <div class="widget-header k-card-header">
          <span class="widget-title" [title]="card.title">{{
            card.title
          }}</span>
          <div class="floating-button">
            <button
              mat-button
              color="primary"
              (click)="openDataSource(card)"
              *ngIf="card.showDataSourceLink"
            >
              {{ 'components.widget.summaryCard.dataSource' | translate }}
              <safe-icon icon="open_in_new" [inline]="true"></safe-icon>
            </button>
          </div>
        </div>
        <div
          class="card-content"
          [innerHTML]="cardsContent[i] ? cardsContent[i].html : null"
        ></div>
      </div>
    </div>
  </kendo-pdf-export>
</div>
