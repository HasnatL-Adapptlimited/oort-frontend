<mat-radio-group
  aria-label="Select an option"
  [value]="radioValue"
  (change)="radioChange($event)"
>
  <mat-radio-button [value]="true">{{
    'common.aggregation.one' | translate
  }}</mat-radio-button>
  <mat-radio-button [value]="false"
    >{{ 'common.form.one' | translate }}|{{
      'common.resource.one' | translate
    }}</mat-radio-button
  >
</mat-radio-group>

<ng-container *ngIf="radioValue"> </ng-container>

<ng-container *ngIf="!radioValue" [formGroup]="form">
  <div class="form-group">
    <mat-form-field fxFlex appearance="outline">
      <mat-label>{{ 'models.resource.select' | translate }}</mat-label>
      <safe-graphql-select
        valueField="id"
        textField="name"
        [query]="resourcesQuery"
        formControlName="resource"
        [selectedElements]="[selectedResource]"
      ></safe-graphql-select>
    </mat-form-field>
    <ng-container *ngIf="form.get('resource')?.value">
      <h2>{{ 'common.layout.one' | translate }}</h2>
      <ng-container *ngIf="selectedLayout">
        <mat-form-field appearance="outline">
          <mat-label>{{ 'common.layout.one' | translate }}</mat-label>
          <mat-select [disabled]="true" [value]="selectedLayout.id">
            <mat-option [value]="selectedLayout.id">{{
              selectedLayout.name
            }}</mat-option>
          </mat-select>
          <safe-button
            matSuffix
            variant="primary"
            [isIcon]="true"
            icon="edit"
            (click)="editLayout()"
          ></safe-button>
          <safe-button
            matSuffix
            variant="danger"
            [isIcon]="true"
            icon="close"
            (click)="form.get('layout')?.setValue(null)"
          ></safe-button>
        </mat-form-field>
      </ng-container>
      <ng-container *ngIf="!form.value.layout">
        <safe-button
          [block]="true"
          category="tertiary"
          variant="primary"
          (click)="addLayout()"
          >{{ 'components.aggregation.add.title' | translate }}</safe-button
        >
      </ng-container>
    </ng-container>
  </div>
</ng-container>
