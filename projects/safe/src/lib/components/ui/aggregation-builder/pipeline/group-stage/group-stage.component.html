<p>Grouping rules</p>
<div class="group-by">
  <div
    class="group-by-rule"
    *ngFor="let rule of groupBy.controls; let i = index"
  >
    <safe-field-dropdown
      [fieldControl]="$any(rule).controls.field"
      [fields]="fields"
    ></safe-field-dropdown>
    <safe-expressions
      *ngIf="displayDateOperators"
      [fields]="fields"
      [form]="$any(rule).controls.expression"
      [operators]="$any(dateOperators)"
      [displayField]="false"
    ></safe-expressions>
    <safe-button
      *ngIf="i > 0"
      (click)="onDeleteRule(i)"
      [isIcon]="true"
      icon="delete"
      variant="danger"
    ></safe-button>
  </div>
  <safe-button icon="add" category="tertiary" (click)="onAddRule()"
    >Add rule</safe-button
  >
</div>
<p>Grouping fields</p>
<div>
  <safe-add-field-stage
    [fields]="fields"
    [form]="addFields"
    [operators]="operators"
    [displayName]="false"
  ></safe-add-field-stage>
</div>
