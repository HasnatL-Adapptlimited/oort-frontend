{
  "id": "185ee956197-layer-2",
  "title": "Locations",
  "url": "https://services8.arcgis.com/txUUTsBLJZHY6Coo/arcgis/rest/services/ports/FeatureServer/0",
  "visibility": true,
  "itemId": "a203953d8a4e4c2dba997356239c891b",
  "layerType": "ArcGISFeatureLayer",
  "layerDefinition": {
    "featureReduction": {
      "type": "cluster",
      "clusterRadius": 37.5,
      "clusterMinSize": 16.5,
      "clusterMaxSize": 37.5,
      "disablePopup": false,
      "popupInfo": {
        "popupElements": [
          {
            "type": "text",
            "text": "This cluster represents <b>{cluster_count}</b> features."
          },
          {
            "type": "text",
            "text": "The average value of <b>scalerank</b> within this cluster is <b>{cluster_avg_scalerank}</b>."
          }
        ],
        "description": "This cluster represents <b>{cluster_count}</b> features.",
        "expressionInfos": [],
        "fieldInfos": [
          {
            "fieldName": "cluster_count",
            "format": {
              "digitSeparator": true,
              "places": 0
            },
            "label": "Number of features",
            "visible": true
          },
          {
            "fieldName": "cluster_avg_scalerank",
            "format": {
              "digitSeparator": true,
              "places": 2
            },
            "label": "Average scalerank",
            "visible": true
          }
        ],
        "title": "Cluster summary"
      },
      "drawingInfo": {
        "renderer": {
          "type": "simple",
          "symbol": {
            "type": "esriSMS",
            "color": [227, 139, 79, 255],
            "angle": 0,
            "xoffset": 0,
            "yoffset": 0,
            "size": 6.75,
            "style": "esriSMSCircle",
            "outline": {
              "type": "esriSLS",
              "color": [92, 92, 92, 255],
              "width": 1,
              "style": "esriSLSSolid"
            }
          }
        },
        "labelingInfo": [
          {
            "deconflictionStrategy": "none",
            "labelExpressionInfo": {
              "expression": "\n  $feature[\"cluster_avg_scalerank\"];\n  var value = $feature[\"cluster_avg_scalerank\"];\n  var num = Count(Text(Round(value)));\n  var label = When(\n    num < 4, Text(value, \"#.#\"),\n    num == 4, Text(value / Pow(10, 3), \"#.0k\"),\n    num <= 6, Text(value / Pow(10, 3), \"#k\"),\n    num == 7, Text(value / Pow(10, 6), \"#.0m\"),\n    num > 7, Text(value / Pow(10, 6), \"#m\"),\n    Text(value, \"#,###\")\n  );\n  return label;\n  "
            },
            "labelPlacement": "esriServerPointLabelPlacementCenterCenter",
            "repeatLabel": true,
            "symbol": {
              "type": "esriTS",
              "color": [240, 240, 240, 255],
              "font": {
                "family": "Noto Sans",
                "size": 9,
                "weight": "bold"
              },
              "horizontalAlignment": "center",
              "kerning": true,
              "haloColor": [55, 56, 55, 255],
              "haloSize": 0.75,
              "rotated": false,
              "text": "",
              "verticalAlignment": "baseline",
              "xoffset": 0,
              "yoffset": 0,
              "angle": 0
            }
          }
        ]
      },
      "showLabels": true,
      "fields": [
        {
          "isAutoGenerated": true,
          "name": "cluster_count",
          "statisticType": "count"
        }
      ]
    },
    "definitionExpression": "name LIKE 'p%'",
    "drawingInfo": {
      "renderer": {
        "authoringInfo": {
          "visualVariables": [
            {
              "maxSliderValue": 8,
              "minSliderValue": 3,
              "theme": "high-to-low",
              "type": "sizeInfo"
            }
          ]
        },
        "type": "classBreaks",
        "visualVariables": [
          {
            "type": "sizeInfo",
            "field": "scalerank",
            "maxDataValue": 8,
            "maxSize": {
              "type": "sizeInfo",
              "valueExpression": "$view.scale",
              "stops": [
                {
                  "size": 75,
                  "value": 1155581.108577
                },
                {
                  "size": 75,
                  "value": 9244648.868618
                },
                {
                  "size": 45,
                  "value": 73957190.948944
                },
                {
                  "size": 22.5,
                  "value": 591657527.591555
                }
              ]
            },
            "minDataValue": 3,
            "minSize": {
              "type": "sizeInfo",
              "valueExpression": "$view.scale",
              "stops": [
                {
                  "size": 7.5,
                  "value": 1155581.108577
                },
                {
                  "size": 6,
                  "value": 9244648.868618
                },
                {
                  "size": 3,
                  "value": 73957190.948944
                },
                {
                  "size": 1.5,
                  "value": 591657527.591555
                }
              ]
            },
            "valueUnit": "unknown"
          }
        ],
        "classBreakInfos": [
          {
            "classMaxValue": 9007199254740991,
            "symbol": {
              "type": "esriSMS",
              "color": [227, 139, 79, 255],
              "angle": 0,
              "xoffset": 0,
              "yoffset": 0,
              "size": 9,
              "style": "esriSMSCircle",
              "outline": {
                "type": "esriSLS",
                "color": [255, 255, 255, 64],
                "width": 0.75,
                "style": "esriSLSSolid"
              }
            }
          }
        ],
        "field": "scalerank",
        "minValue": -9007199254740991
      }
    }
  },
  "popupInfo": {
    "popupElements": [
      {
        "type": "fields",
        "description": "This is a description for the feature",
        "fieldInfos": [
          {
            "fieldName": "featureclass",
            "isEditable": true,
            "label": "featureclass",
            "visible": true
          },
          {
            "fieldName": "name",
            "isEditable": true,
            "label": "name",
            "visible": true
          },
          {
            "fieldName": "natlscale",
            "format": {
              "digitSeparator": true,
              "places": 0
            },
            "isEditable": true,
            "label": "natlscale",
            "visible": true
          },
          {
            "fieldName": "scalerank",
            "format": {
              "digitSeparator": true,
              "places": 0
            },
            "isEditable": true,
            "label": "Property",
            "visible": true
          },
          {
            "fieldName": "website",
            "isEditable": true,
            "label": "website",
            "visible": true
          }
        ],
        "title": "Scale rank is : {scalerank}"
      },
      {
        "type": "text",
        "text": "<p><a href='{website}' rel='nofollow ugc'>{website}</a> is superbe ! Go visit it</p>"
      },
      {
        "type": "media",
        "description": "",
        "mediaInfos": [
          {
            "altText": "",
            "caption": "",
            "title": "",
            "type": "image",
            "value": {
              "linkURL": "",
              "sourceURL": ""
            }
          }
        ],
        "title": ""
      }
    ],
    "description": "<p><a href='{website}' rel='nofollow ugc'>{website}</a> is superbe ! Go visit it</p>",
    "mediaInfos": [
      {
        "altText": "",
        "caption": "",
        "title": "",
        "type": "image",
        "value": {
          "linkURL": "",
          "sourceURL": ""
        }
      }
    ],
    "fieldInfos": [
      {
        "fieldName": "ObjectId",
        "label": "",
        "visible": false
      },
      {
        "fieldName": "name",
        "isEditable": true,
        "label": "name",
        "visible": true
      },
      {
        "fieldName": "featureclass",
        "isEditable": true,
        "label": "featureclass",
        "visible": true
      },
      {
        "fieldName": "natlscale",
        "format": {
          "digitSeparator": true,
          "places": 0
        },
        "isEditable": true,
        "label": "natlscale",
        "visible": true
      },
      {
        "fieldName": "scalerank",
        "format": {
          "digitSeparator": true,
          "places": 0
        },
        "isEditable": true,
        "label": "Property",
        "visible": true
      },
      {
        "fieldName": "website",
        "isEditable": true,
        "label": "website",
        "visible": true
      }
    ],
    "title": "Ports - ports points: {name}"
  }
}
