<div class="flex items-center" >
  <!-- LABEL LEFT -->
  <ng-container *ngIf="label && label.position === 'left'">
    <ng-container *ngTemplateOutlet="labelTemplate"></ng-container>
  </ng-container>

  <!-- TOGGLE -->
  <button type="button" role="switch" aria-labelledby="custom-label" aria-describedby="custom-description"
    (click)="triggerAction()" [attr.aria-checked]="enabled" class="toggle-button"
    [class.bg-gray-200]="!enabled && type === toggleTypes.SIMPLE"
    [class.bg-indigo-600]="enabled && type === toggleTypes.SIMPLE"
    [ngClass]="{
      'button-simple': type === toggleTypes.SIMPLE,
      'button-short': type === toggleTypes.SHORT
    }"
  >
    <span aria-hidden="true" class="pointer-events-none bg-white"
      [class.translate-x-0]="!enabled && type === toggleTypes.SIMPLE"
      [class.translate-x-5]="enabled && type === toggleTypes.SIMPLE"
      [ngClass]="{
        'span-simple': type === toggleTypes.SIMPLE,
        'span-short': type === toggleTypes.SHORT
      }"
    >
      <!-- ICON -->
      <ng-container *ngIf="icon">
        <ng-container *ngTemplateOutlet="iconTemplate"></ng-container>
      </ng-container>
    </span>

    <ng-container *ngIf="type === toggleTypes.SHORT">
      <ng-container *ngTemplateOutlet="shortToggleTemplate"></ng-container>
    </ng-container>
  </button>

  <!-- LABEL RIGHT -->
  <ng-container *ngIf="label && label.position === 'right'">
    <ng-container *ngTemplateOutlet="labelTemplate"></ng-container>
  </ng-container>
</div>

<ng-template #shortToggleTemplate>
  <span aria-hidden="true" class="short-color"
    [class.bg-gray-200]="!enabled"
    [class.bg-indigo-600]="enabled"
  >
  </span>
  <span aria-hidden="true" class="short-translate"
    [class.translate-x-0]="!enabled"
    [class.translate-x-5]="enabled"
  >
  </span>
</ng-template>

<ng-template #labelTemplate>
  <span class="flex flex-col flex-wrap whitespace-pre-wrap text-sm"
    [class.ml-4]="label.position === 'right'"
    [class.mr-4]="label.position === 'left'"
  >
    <!-- TEXT -->
    <span class="font-medium leading-6 text-gray-900" id="custom-label">
      {{label.text}}
    </span>
    <!-- DESCRIPTION -->
    <span class="text-gray-500" id="custom-description" *ngIf="label.description">
      {{label.description}}
    </span>
  </span>
</ng-template>

<ng-template #iconTemplate>
  <!-- ICON WHEN TOGGLE DISABLED -->
  <span class="icon" aria-hidden="true"
    [ngClass]="{ 'icon-visible': !enabled, 'icon-hidden': enabled }"
  >
    <ui-icon
      [icon]="icon.disableIcon"
      [size]="12"
    ></ui-icon>
  </span>
  <!-- ICON WHEN TOGGLE ENABLED -->
  <span class="icon" aria-hidden="true"
    [ngClass]="{ 'icon-visible': enabled, 'icon-hidden': !enabled }"
  >
    <ui-icon
      [icon]="icon.enableIcon"
      [size]="12"
    ></ui-icon>
  </span>
</ng-template>