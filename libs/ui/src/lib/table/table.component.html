<div class="px-4 min-w-full py-2 align-middle sm:px-6 lg:px-8">
  <div
    [ngClass]="{
      'shadow ring-1 ring-black ring-opacity-5 sm:rounded-lg py-2 px-3':
        displayAsCard
    }"
    class="-mx-4 mt-8 sm:-mx-0"
  >
    <!--TABLE CONTENT-->
    <table
      cdk-table
      [dataSource]="pagedTableData"
      [trackBy]="trackByName"
      class="min-w-full divide-y divide-gray-300"
    >
      <ng-container *ngFor="let column of columnDefinitionData">
        <ng-container cdkColumnDef="{{ column.title }}">
          <th
            cdk-header-cell
            *cdkHeaderCellDef
            scope="col"
            [ngClass]="{ 'cursor-pointer': column.sortable }"
            class="py-3.5 pl-4 pr-3 capitalize text-left text-sm font-normal text-neutral-400 sm:pl-0"
            (click)="sortTableByKey(column)"
          >
            {{ column.title }}
            <span
              class=""
              *ngIf="
                sortKey$?.value.title === column.title &&
                sortDirection$.value !== tableSort.DEFAULT
              "
            >
              {{ sortDirection$?.value === tableSort.ASC ? '↥' : '↧' }}
            </span>
          </th>
          <td
            cdk-cell
            *cdkCellDef="let element"
            class="w-full max-w-0 py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:w-auto sm:max-w-none sm:pl-0"
          >
            <ng-container *ngIf="column.template; else defaultDisplay">
              <ng-container
                *ngIf="isString(column.template); else templateRefTmpl"
              >
                <ng-container
                  *uiTableTemplateResolver="
                    column;
                    context: this;
                    element: element
                  "
                ></ng-container>
              </ng-container>
              <ng-template #templateRefTmpl>
                <ng-container
                  *ngTemplateOutlet="column.template"
                ></ng-container>
              </ng-template>
            </ng-container>
            <ng-template #defaultDisplay>
              {{ get(element, column.dataAccessor) }}
            </ng-template>
          </td>
        </ng-container>
      </ng-container>
      <thead>
        <tr cdk-header-row *cdkHeaderRowDef="columnDefinitionArray"></tr>
      </thead>
      <tbody>
        <tr cdk-row *cdkRowDef="let row; columns: columnDefinitionArray"></tr>
      </tbody>
    </table>
    <!-- PAGINATOR CONTENT-->
    <kendo-datapager
      [attr.aria-controls]="contentId"
      [style.width.%]="100"
      [pageSize]="pageSize"
      [skip]="skip"
      [total]="totalItems"
      (pageChange)="onPageChange($event)"
    >
      <ng-template
        kendoDataPagerTemplate
        let-totalPages="totalPages"
        let-currentPage="currentPage"
      >
        <kendo-datapager-info class="text-neutral-400"></kendo-datapager-info>
        <kendo-datapager-page-sizes
          class="text-neutral-400"
          [pageSizes]="pageSizeValues"
        ></kendo-datapager-page-sizes>
        <div class="k-pager-numbers-wrap">
          <kendo-datapager-prev-buttons></kendo-datapager-prev-buttons>
          <kendo-datapager-numeric-buttons
            [buttonCount]="3"
          ></kendo-datapager-numeric-buttons>
          <kendo-datapager-next-buttons></kendo-datapager-next-buttons>
        </div>
      </ng-template>
    </kendo-datapager>
  </div>
</div>
