<ui-tabs [vertical]="true" class="grow">
  <ui-tab>
    <ng-container ngProjectAs="label">
      <ui-icon icon="map" [size]="24"> </ui-icon>
      <span>{{
        'components.widget.settings.map.properties.title' | translate
      }}</span>
    </ng-container>
    <div>
      <safe-map-properties
        [form]="tileForm"
        [mapSettings]="mapSettings"
      ></safe-map-properties>
      <!-- <ng-container *ngTemplateOutlet="map"></ng-container> -->
    </div>
  </ui-tab>
  <ui-tab>
    <ng-container ngProjectAs="label">
      <ui-icon icon="layers" [size]="24"> </ui-icon>
      <span>{{ 'common.layers' | translate }}</span>
    </ng-container>
    <div>
      <safe-map-layers
        [layerIds]="layerIds"
        (editLayer)="onEditLayer($event)"
        (deleteLayer)="onDeleteLayer($event)"
      ></safe-map-layers>
      <!-- <ng-container *ngTemplateOutlet="map"></ng-container> -->
    </div>
  </ui-tab>
  <ui-tab>
    <ng-container ngProjectAs="label">
      <ui-icon icon="settings_overscan" [size]="24"> </ui-icon>
      <span>{{ 'models.widget.display.title' | translate }}</span>
    </ng-container>
    <div>
      <safe-display-settings [formGroup]="tileForm"></safe-display-settings>
      <!-- <ng-container *ngTemplateOutlet="map"></ng-container> -->
    </div>
  </ui-tab>
  <!-- <ng-container *ngIf="currentTab === 'layer' && layerComponent">
    <ui-divider></ui-divider>
    <ng-container
      [ngTemplateOutlet]="layerComponent.layerNavigationTemplate"
    ></ng-container>
  </ng-container> -->
</ui-tabs>

<!-- <div class="flex flex-wrap gap-4 flex-col lg:flex-row lg:h-full">
  <ng-container *ngIf="currentTab">
    <div
      [ngClass]="{ 'overflow-auto': currentTab !== 'layer' }"
      [ngSwitch]="currentTab"
      class="lg:basis-1/2 lg:max-h-full px-2"
    >
      <ng-container *ngSwitchCase="'layer'">
        <ng-container *ngIf="layerComponent">
          <ng-container
            [ngTemplateOutlet]="layerComponent.layerSettingsTemplate"
          ></ng-container>
        </ng-container>
      </ng-container>
    </div>
  </ng-container>
  <div class="lg:flex-1 max-lg:min-w-full h-80 lg:min-h-full flex-shrink-0">
    <safe-map
      class="w-full h-full"
      (mapEvent)="handleMapEvent($event)"
      [mapSettings]="mapSettings"
    ></safe-map>
  </div>
</div> -->

<ng-template #map>
  <safe-map
    class="w-full h-full"
    (mapEvent)="handleMapEvent($event)"
    [mapSettings]="mapSettings"
  ></safe-map>
</ng-template>

<!-- <ng-container *ngIf="currentTab === 'layer'">
  <safe-map-layer
    [layer]="openedLayers[0]"
    [mapComponent]="mapComponent"
    (layerToSave)="saveLayer($event)"
    (layerToOpen)="onEditLayer($event)"
  ></safe-map-layer>
</ng-container> -->
<!-- <ng-container *ngIf="tileForm">
  <ui-tabs [vertical]="true" class="grow">
    <ui-tab>
      <ng-container ngProjectAs="label">
        <ui-icon
          icon="preview"
          [size]="24"
          uiTooltip="{{ 'common.general' | translate }}"
        ></ui-icon>
        <span>{{ 'common.general' | translate }}</span>
      </ng-container>
      <safe-map-general *ngIf="tileForm" [form]="tileForm"></safe-map-general>
    </ui-tab>
    <ui-tab>
      <ng-container ngProjectAs="label">
        <ui-icon
          icon="layers"
          [size]="24"
          uiTooltip="{{ 'common.layers' | translate }}"
        ></ui-icon>
        <span>{{ 'common.layers' | translate }}</span>
      </ng-container>
      <safe-map-layers
        [form]="tileForm"
        [selectedFields]="selectedFields"
        [formattedSelectedFields]="formattedSelectedFields"
      ></safe-map-layers>
    </ui-tab>
    <ui-tab>
      <ng-container ngProjectAs="label">
        <ui-icon
          icon="map"
          [size]="24"
          uiTooltip="{{
            'components.widget.settings.map.properties.title' | translate
          }}"
        ></ui-icon>
        <span>{{
          'components.widget.settings.map.properties.title' | translate
        }}</span>
      </ng-container>
      <safe-map-properties [form]="tileForm"></safe-map-properties>
    </ui-tab>
    <ui-tab>
      <ng-container ngProjectAs="label">
        <ui-icon
          icon="settings_overscan"
          [size]="24"
          [uiTooltip]="'models.widget.display.title' | translate"
        ></ui-icon>
        <span>{{ 'models.widget.display.title' | translate }}</span>
      </ng-container>
      <safe-display-settings [formGroup]="tileForm"></safe-display-settings>
    </ui-tab>
  </ui-tabs>
</ng-container> -->
